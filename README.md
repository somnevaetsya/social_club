# Social Club

Тестовое задание


## Задача
Необходимо реализовать HTTP REST сервис, который должен предоставлять
API со следующими методами:
* Добавление факта коммуникации;
* Получение графа социальных связей, при этом граф должен содержать не только структуру по узлам и ребрам, но и иметь раздел со сводной информацией по количествам коммуникай между пользователями (минимальное, максимальное, среднее).

## Отправка сообщения
Для того, чтобы зарегистрировать факт коммуникации между пользователями, необходимо отправить Json-объект следующего формата на URL "http://localhost:5000/msg" с помощью метода POST:
```yaml
{
  "first_user" : id, 
  "second_user" : id
}
```
где id - уникальный неотрицательный идентификатор пользователя.

Очередность введения идентификаторов пользователя ни на что не влияет, так как учитывается факт взаимодействия.


## Получение информации о коммуникациях 
Для получения информации о коммуникациях необходимо сделать запрос на URL "http://localhost:5000/info" методом GET. Пример получаемого ответа:
```yaml
{
  "graph": [
    {
      "user_id": 3,
      "messages": "{User: 4; Messages in dialog: 1}; "
    },
    {
      "user_id": 1,
      "messages": "{User: 4; Messages in dialog: 1}; "
    },
    {
      "user_id": 4,
      "messages": "{User: 3; Messages in dialog: 1}; "
    },
    {
      "user_id": 2,
      "messages": "{User: 4; Messages in dialog: 1}; "
    }
  ],
  "min_value": 1,
  "avg_value": 0.75,
  "max_value": 1,
  "is_empty": false
}
```
В случае запроса информации из пустой базы данных придет следующий ответ:
```yaml
{
    "graph": null,
    "min_value": 0,
    "avg_value": 0,
    "max_value": 0,
    "is_empty": true
}
```

## Запуск API
Для запуска API с in-memory хранилищем:
```
docker build -t <name> -f Dockerfile-memory .
docker run -p 5000:5000 -t <name>
```

Для запуска API с PostgreSQL:
```
docker-compose build --no-cache
docker-compose up
```